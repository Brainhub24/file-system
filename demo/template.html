<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>{{TITLE}}</title>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/atom-one-dark.css">
        <link rel="stylesheet" href="css/fs.css">
    </head>
    <body>
        <header>
            <h1>{{TITLE}}</h1>
            <nav>
                <a href="{{REPO}}">GitHub</a>
                <a href="{{DOCS}}">Documentation</a>
                <a href="{{PAGE}}">lowlight.fr</a>
            </nav>
        </header>
        <main class="container-full">
            <div class="container">
                <p>
                    This is a live demo from this <a href="{{REPO}}">library</a>.
                </p>
                <p>
                    This library is an implementation of an "homemade" File System, similar to FAT.
                    It's based on steganography so data can be stored and loaded from a supported image file (Image must be drawable with CanvasRenderingContext2D.drawImage).
                    A GUI is also included with multiples applications.
                </p>
                <p>
                    See it on <a href="{{REPO}}">GitHub</a> for more informations.
                </p>
                <p class="local-warning">
                    It seems you're running this file from a local file system.<br />
                    Cross origin requests may be supported only for protocol schemes on some browsers.
                </p>
            </div>
            <div class="container app">
                <div class="app-view">
                    <canvas width="400" height="400"></canvas>
                </div>
                <div class="app-controller">
                </div>
            </div>
        </main>
        <div class="container-full">
            <pre>
                <code>
    $(function () {
        //Shortcuts
            let GUI = Lowlight.FileSystem.GUI, Image = Lowlight.FileSystem.Image
        //Demo
            $("<img>").attr("src", "./imgs/image.png").on("load", function () {
                $(".app-view canvas").get(0).getContext("2d").drawImage($(this).get(0), 0, 0)
                new GUI(
                    Image.open($(".app-view canvas").get(0).getContext("2d")),
                    $(".app-controller").get(0)
                )
            })
    })</code>
            </pre>
        </div>

        <div class="hidden">
            <img src="imgs/picture-steganography.png" class="steganography-picture">
            <p class="text-no-audio">Impossible to read</p>
            <p class="text-properties">Properties</p>
            <p class="text-name">Name</p>
            <p class="text-parent">Parent folder</p>
            <p class="text-block">Memory index</p>
            <p class="text-size">Size (on disk)</p>
            <p class="text-type">Type</p>
            <p class="text-type-file">File</p>
            <p class="text-type-folder">Folder</p>
            <p class="text-visibility">Visibility</p>
            <p class="text-visibility-visible">Visible</p>
            <p class="text-visibility-hidden">Hidden</p>
            <p class="text-owner">Owner</p>
            <p class="text-date-creation">Creation date</p>
            <p class="text-date-edition">Edition date</p>
            <p class="text-permissions">Permissions</p>
            <p class="text-permissions-owner">Owner</p>
            <p class="text-permissions-others">All</p>
            <p class="text-permissions-yes">Yes</p>
            <p class="text-permissions-no">No</p>
            <p class="text-permissions-r">Read</p>
            <p class="text-permissions-w">Write</p>
            <p class="text-permissions-x">Execute</p>
            <p class="text-permissions-d">Delete</p>
            <p class="text-sessions">Sessions</p>
            <p class="text-sessions-user">User</p>
            <p class="text-sessions-password">Password</p>
            <p class="text-sessions-remove">Delete</p>
            <p class="text-sessions-create">Create</p>
            <p class="text-sessions-login">Login</p>
            <p class="text-explorer">Explorer</p>
            <p class="text-terminal">Terminal</p>
            <p class="text-new-file">file.txt</p>
            <p class="text-new-folder">folder</p>
            <p class="text-rename">Rename</p>
            <p class="text-remove">Delete</p>
            <p class="text-move-to">Move to...</p>
            <p class="text-mk-new-file">New file</p>
            <p class="text-mk-new-folder">New folder</p>
            <p class="text-open-with">Open with...</p>
            <p class="text-open-directory">Open</p>
            <p class="text-open-with-text">Text editor</p>
            <p class="text-open-with-image">Image displayer</p>
            <p class="text-open-with-audio">Audio player</p>
            <p class="text-encryption">Encryption</p>
            <p class="text-sessions-remove-done">User %s deleted</p>
            <p class="text-sessions-create-done">User %s added</p>
            <p class="text-sessions-login-done">Logged as %s</p>
            <p class="text-sessions-logged-as">Welcome, %s</p>
            <p class="text-validate">Validate</p>
            <p class="text-move-to-invalid-path">Invalid or already existing path</p>
            <p class="text-config">Configuration</p>
            <p class="text-image-manager">Load image</p>
            <p class="text-terminal-full">Command-line interpreter</p>
            <p class="text-unknown">Unsupported image</p>
            <p class="text-image">Basic image</p>
            <p class="text-picture">Steganographied image</p>
            <p class="text-unimplemented">(unimplemented)</p>
            <p class="text-empty-folder">(empty folder)</p>
            <p class="text-encryption-tool">Encryption tool</p>
            <p class="text-encryption-key">Key</p>
            <p class="text-encryption-decrypt">Decrypt</p>
            <p class="text-encryption-encrypt">Encrypt</p>
            <p class="text-config-signature">Signature</p>
            <p class="text-config-crypted">Encryption</p>
            <p class="text-config-entry-name">Entry name length</p>
            <p class="text-config-extended">Extended table</p>
            <p class="text-config-size">Total size</p>
            <p class="text-config-used">Used space</p>
            <p class="text-config-free">Available space</p>
            <p class="text-config-table-size">Table entries</p>
            <p class="text-config-block-size">Block size</p>
            <p class="text-config-block-number">Number of blocks</p>
            <p class="text-config-width">Width</p>
            <p class="text-config-height">Height</p>
            <p class="text-config-yes">Yes</p>
            <p class="text-config-no">No</p>
            <p class="text-encryption-missing-key">Invalid key</p>
            <p class="text-encryption-success">Image encrypted, don't forget the key !</p>
            <p class="text-decryption-success">Image decrypted !</p>
            <p class="text-image-manager-stegano">Steganography</p>
            <p class="text-steganography-tool">Steganography</p>
            <p class="text-open-with-cmd">Command-line interpreter</p>
            <p class="text-steganography-info">This utilitary will insert current image data in another image that you'll need to upload.</p>
            <p class="text-script-msg">This script will delete audio file (very voluminous) and will launch a demo of steganography. This may take some time to perform.</p>
            <p class="text-show-hidden">Hidden entries</p>
            <p class="text-clippy-msg">Sometimes I just popup for no particular reason, like now</p>
            <p class="text-image-save">Save image</p>

            <table>
                <tr data-app-help="help">
                    <td><img src="gui/help.png" alt=""></td>
                    <td><span class="bold">help</span> [command=help]</td>
                    <td>Display help for a given command. Below is a list of available commands :<br><br>
                    help, explorer, terminal, rm, mv, stat, chmod, chown, cd, mkdir, ls, tree, mkfile, edit, display, play, exec, su, adduser, deluser, users, whoami, encrypt, decrypt, pwd, env, dstat, dload, dformat.</td>
                </tr>
                <tr data-app-help="explorer">
                    <td><img src="gui/explorer.png" alt=""></td>
                    <td><span class="bold">explorer</span> [path=pwd]</td>
                    <td>Open a new instance of file explorer</td>
                </tr>
                <tr data-app-help="terminal">
                    <td><img src="gui/terminal.png" alt=""></td>
                    <td><span class="bold">terminal</span></td>
                    <td>Open a new command-line interface</td>
                </tr>
                <tr data-app-help="rm">
                    <td rowspan="5"><img src="gui/entries.png" alt=""></td>
                    <td><span class="bold">rm</span> &lt;path&gt; [-r]</td>
                    <td>Remove an entry (add <span class="bold">-r</span> to remove recursively a folder)</td>
                </tr>
                <tr data-app-help="mv">
                    <td><span class="bold">mv</span> &lt;path&gt; &lt;target&gt;</td>
                    <td>Move an entry (add <span class="bold">-f</span> to target folders) and can also be used to rename an entry</td>
                </tr>
                <tr data-app-help="stat">
                    <td><span class="bold">stat</span> &lt;path&gt;</td>
                    <td>Display an entry properties (add <span class="bold">-f</span> to target folders)</td>
                </tr>
                <tr data-app-help="chmod">
                    <td><span class="bold">chmod</span> &lt;path&gt; [-r|+r] [-w|+w] [-x|+x] [-d|+d] [-R|+R] [-W|+W] [-X|+X] [-D|+D] [-f]</td>
                    <td>Edit entries permissions (add <span class="bold">+r</span>, <span class="bold">+w</span>, <span class="bold">+x</span>, <span class="bold">+d</span> to add read, write, execution and deletion rights
                      and <span class="bold">-r</span>, <span class="bold">-w</span>, <span class="bold">-x</span>, <span class="bold">-d</span> to remove them. In lowercase for the owner and uppercase for the others. Add -f to target folders)</td>
                </tr>
                <tr data-app-help="chown">
                    <td><span class="bold">chown</span> &lt;path&gt; &lt;user&gt; [-f]</td>
                    <td>Change the owner of an entry (add <span class="bold">-f</span> to target folders)</td>
                </tr>
                <tr data-app-help="cd">
                    <td><img src="gui/folder-parent.png" alt=""></td>
                    <td><span class="bold">cd</span> [path=/home]</td>
                    <td>Change current directory</td>
                </tr>
                <tr data-app-help="mkdir">
                    <td><img src="gui/folder-empty.png" alt=""></td>
                    <td><span class="bold">mkdir</span> &lt;path&gt;</td>
                    <td>Create a new directory</td>
                </tr>
                <tr data-app-help="ls">
                    <td rowspan="2"><img src="gui/folder-files.png" alt=""></td>
                    <td><span class="bold">ls</span> [path=pwd] [-a] [-l] [-type=ALL|FOLDER|FILE]</td>
                    <td>List entries of directory (add <span class="bold">-a</span> to show hidden entries, <span class="bold">-l</span> to display properties of each entries and <span class="bold">-type</span> to filter entries types)</td>
                </tr>
                <tr data-app-help="tree">
                    <td><span class="bold">tree</span> [path=pwd] [-a]</td>
                    <td>Display directory tree (add <span class="bold">-a</span> to show hidden entries)</td>
                </tr>
                <tr data-app-help="mkfile">
                    <td><img src="gui/file-misc.png" alt=""></td>
                    <td><span class="bold">mkfile</span> &lt;path&gt;</td>
                    <td>Create a new file</td>
                </tr>
                <tr data-app-help="edit">
                    <td><img src="gui/file-text.png" alt=""></td>
                    <td><span class="bold">edit</span> &lt;path&gt;</td>
                    <td>Open a file as a text file</td>
                </tr>
                <tr data-app-help="display">
                    <td><img src="gui/file-img.png" alt=""></td>
                    <td><span class="bold">display</span> &lt;path&gt;</td>
                    <td>Open a file as an image file</td>
                </tr>
                <tr data-app-help="play">
                    <td><img src="gui/file-audio.png" alt=""></td>
                    <td><span class="bold">play</span> &lt;path&gt;</td>
                    <td>Open a file as an audio file</td>
                </tr>
                <tr data-app-help="exec">
                    <td><img src="gui/file-cmd.png" alt=""></td>
                    <td><span class="bold">exec</span> &lt;path&gt;</td>
                    <td>Open a file as a script file (context value is GUI instance)</td>
                </tr>
                <tr data-app-help="su">
                    <td rowspan="5"><img src="gui/sessions.png" alt=""></td>
                    <td><span class="bold">su</span> &lt;user&gt; &lt;password&gt;</td>
                    <td>Login with another user account</td>
                </tr>
                <tr data-app-help="adduser">
                    <td><span class="bold">adduser</span> &lt;user&gt; [password]</td>
                    <td>Create a new user account</td>
                </tr>
                <tr data-app-help="deluser">
                    <td><span class="bold">deluser</span> &lt;user&gt; &lt;password&gt;</td>
                    <td>Delete an existing user account</td>
                </tr>
                <tr data-app-help="users">
                    <td><span class="bold">users</span></td>
                    <td>Display users list</td>
                </tr>
                <tr data-app-help="whoami">
                    <td><span class="bold">whoami</span></td>
                    <td>Display current user account name</td>
                </tr>
                <tr data-app-help="encrypt">
                    <td rowspan="2"><img src="gui/encryption.png" alt=""></td>
                    <td><span class="bold">encrypt</span> &lt;key&gt;</td>
                    <td>Encrypt disk data</td>
                </tr>
                <tr data-app-help="decrypt">
                    <td><span class="bold">decrypt</span> &lt;key&gt;</td>
                    <td>Decrypt disk data</td>
                </tr>
                <tr data-app-help="pwd">
                    <td rowspan="3"><img src="gui/config.png" alt=""></td>
                    <td><span class="bold">pwd</span></td>
                    <td>Display path working directory</td>
                </tr>
                <tr data-app-help="env">
                    <td><span class="bold">env</span></td>
                    <td>Display environnment variables</td>
                </tr>
                <tr data-app-help="dstat">
                    <td><span class="bold">dstat</span></td>
                    <td>Display disk properties</td>
                </tr>
                <tr data-app-help="dload">
                    <td rowspan="2"><img src="gui/image-manager.png" alt=""></td>
                    <td><span class="bold">dload</span></td>
                    <td>Open disk loader</td>
                </tr>
                <tr data-app-help="dformat">
                    <td><span class="bold">dformat</span> [-size=400x400] [-table-size=512] [-block-size=256] [-entry-name-length=8|16|24|32] [-table-extended=y|n]</td>
                    <td>
                        Create a new image (will reload interface after creation) where :
                        <ul>
                            <li><span class="bold">-size</span> is image size (NB : it also update canvas size !)</li>
                            <li><span class="bold">-table-size</span> is maximum entries number in allocation table</li>
                            <li><span class="bold">-block-size</span> it the unit size of block content</li>
                        </ul>
                        and
                        <ul>
                            <li><span class="bold">-entry-name-length</span> is the number of bytes allocated to entries' names</li>
                            <li><span class="bold">-table-extended</span> enables extended table (add creation and last edition dates, and permissions for each users)</li>
                        </ul>
                    </td>
                </tr>
            </tbody></table>

        </div>

        <script type="text/javascript" src="./js/jquery.js"></script>
        <script type="text/javascript" src="./../bin/lowlight.fs.min.js"></script>
        <script type="text/javascript" src="./js/lowlight.random.min.js"></script>
        <script type="text/javascript" src="./js/demo.js"></script>
        <script type="text/javascript" src="./js/highlight.pack.js"></script>
        <script type="text/javascript"></script>
        <script>hljs.initHighlightingOnLoad()</script>
        <script type="text/javascript">if (/file/.test(window.location.protocol)) { $(".local-warning").show() }</script>
    </body>
</html>
